import { Constructor } from '@mikro-orm/core';
import { EntityManager } from '@mikro-orm/knex';
import { Migration } from './Migration';
import { MigrationStorage } from './MigrationStorage';
declare module 'umzug' {
    interface MigrationDefinitionWithName extends UmzugMigration {
        name: string;
    }
    interface UmzugStatic {
        migrationsList(migrations: MigrationDefinitionWithName[], parameters?: any[]): UmzugMigration[];
    }
}
export declare class Migrator {
    private readonly em;
    private readonly umzug;
    private readonly driver;
    private readonly schemaGenerator;
    private readonly config;
    private readonly options;
    private readonly runner;
    private readonly generator;
    private readonly storage;
    constructor(em: EntityManager);
    createMigration(path?: string, blank?: boolean, initial?: boolean): Promise<MigrationResult>;
    validateInitialMigration(): Promise<void>;
    getExecutedMigrations(): Promise<MigrationRow[]>;
    getPendingMigrations(): Promise<UmzugMigration[]>;
    up(options?: string | string[] | MigrateOptions): Promise<UmzugMigration[]>;
    down(options?: string | string[] | MigrateOptions): Promise<UmzugMigration[]>;
    getStorage(): MigrationStorage;
    protected resolve(file: string): {
        name: string | undefined;
        up: () => Promise<void>;
        down: () => Promise<void>;
    };
    protected initialize(MigrationClass: Constructor<Migration>, name?: string): {
        name: string | undefined;
        up: () => Promise<void>;
        down: () => Promise<void>;
    };
    private getSchemaDiff;
    private prefix;
    private runMigrations;
}
export declare type UmzugMigration = {
    name?: string;
    path?: string;
    file: string;
};
export declare type MigrateOptions = {
    from?: string | number;
    to?: string | number;
    migrations?: string[];
};
export declare type MigrationResult = {
    fileName: string;
    code: string;
    diff: string[];
};
export declare type MigrationRow = {
    name: string;
    executed_at: Date;
};
