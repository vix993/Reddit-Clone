import { isBrowser } from '@typed/common';
/** Create a clock relative to the current time */
export const createRelativeClock = (clock) => new RelativeClock(clock, clock.currentTime());
export const createClock = () => {
    const clock = isBrowser
        ? { currentTime: () => performance.now() }
        : new HRTimeClock(process.hrtime, process.hrtime());
    const relative = createRelativeClock(clock);
    return relative;
};
// tslint:disable-next-line:max-classes-per-file
class RelativeClock {
    constructor(clock, origin) {
        this.clock = clock;
        this.origin = origin;
        this.currentTime = () => {
            return this.clock.currentTime() - this.origin;
        };
    }
}
// tslint:disable-next-line:max-classes-per-file
class HRTimeClock {
    constructor(hrtime, origin) {
        this.hrtime = hrtime;
        this.origin = origin;
    }
    currentTime() {
        const hrt = this.hrtime(this.origin);
        return (hrt[0] * 1e9 + hrt[1]) / 1e6;
    }
}
//# sourceMappingURL=clock.js.map