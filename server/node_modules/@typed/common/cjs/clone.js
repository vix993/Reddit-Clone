"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.clone = void 0;
const typeOf_1 = require("./typeOf");
function clone(value, refFrom, refTo, deep) {
    function copy(copiedValue) {
        const length = refFrom.length;
        let i = 0;
        for (; i < length; ++i) {
            if (value === refFrom[i]) {
                return refTo[i];
            }
        }
        refFrom[i + 1] = value;
        refTo[i + 1] = copiedValue;
        for (const key in value) {
            if (!value.hasOwnProperty(key)) {
                continue;
            }
            copiedValue[key] = deep ? clone(value[key], refFrom, refTo, true) : value[key];
        }
        return copiedValue;
    }
    switch (typeOf_1.typeOf(value)) {
        case 'Object':
            return copy({});
        case 'Array':
            return copy([]);
        case 'Date':
            return new Date(value.valueOf());
        case 'RegExp':
            return cloneRegexp(value);
        default:
            return value;
    }
}
exports.clone = clone;
function cloneRegexp(pattern) {
    return new RegExp(pattern.source, (pattern.global ? 'g' : '') +
        (pattern.ignoreCase ? 'i' : '') +
        (pattern.multiline ? 'm' : '') +
        (pattern.sticky ? 'y' : '') +
        (pattern.unicode ? 'u' : ''));
}
//# sourceMappingURL=clone.js.map